{"version":3,"file":"downlevel-compilation.js","sourceRoot":"","sources":["../../../../../src/lib/ng-v5/entry-point/ts/downlevel-compilation.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,6BAA6B;AAC7B,yCAAyC;AACzC,wDAA2E;AAC3E,uCAAqE;AACrE,6EAAyE;AAG5D,QAAA,yBAAyB,GAAc,gCAAoB,CAAC,CAAM,KAAK,EAAC,EAAE;IACrF,GAAG,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;IACrD,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,8BAAsB,EAAE,CAAmB,CAAC;IAC1E,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,UAAU,CAAC,IAAI,CAAC,gBAAgB,CAAC;IAC3D,MAAM,4CAAoB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IACxD,MAAM,CAAC,KAAK,CAAC;AACf,CAAC,CAAA,CAAC,CAAC","sourcesContent":["import * as path from 'path';\r\nimport * as log from '../../../util/log';\r\nimport { Transform, transformFromPromise } from '../../../brocc/transform';\r\nimport { isEntryPointInProgress, EntryPointNode } from '../../nodes';\r\nimport { downlevelEmitWithTsc } from '../../../ts/downlevel-transformer';\r\nimport { TsConfig } from '../../../ts/tsconfig';\r\n\r\nexport const downlevelCompileTransform: Transform = transformFromPromise(async graph => {\r\n  log.info(`Downleveling ESM2015 sources through tsc`);\r\n  const entryPoint = graph.find(isEntryPointInProgress()) as EntryPointNode;\r\n  const { esm2015, esm5 } = entryPoint.data.destinationFiles;\r\n  await downlevelEmitWithTsc(esm2015, path.dirname(esm5));\r\n  return graph;\r\n});\r\n"]}